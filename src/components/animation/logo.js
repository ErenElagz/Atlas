import React, { useEffect, useRef } from "react";
import { View, Animated, Easing } from "react-native";
import Svg, { Path } from "react-native-svg";

export default function AnimatedSvg() {
    const dashOffset1 = useRef(new Animated.Value(1653.445556640625)).current;
    const dashOffset2 = useRef(new Animated.Value(1653.445556640625)).current;

    useEffect(() => {
        animateDashOffset(dashOffset1, 0, 750, 0);
        animateDashOffset(dashOffset2, 0, 1000, 100);
    }, []);

    const animateDashOffset = (offset, toValue, duration, delay) => {
        Animated.timing(offset, {
            toValue: toValue,
            duration: duration,
            easing: Easing.bezier(0.47, 0, 0.745, 0.715),
            delay: delay,
            useNativeDriver: true
        }).start();
    };

    const strokeDashArray = "1200px";

    return (
        <View>
            <Svg width="30" height="30" viewBox="0 0 491 491">
                <AnimatedPath
                    d="M53.3333 160H202.667C215.325 160 227.698 156.246 238.223 149.214C248.748 142.182 256.951 132.186 261.795 120.492C266.639 108.797 267.906 95.929 265.437 83.5143C262.967 71.0995 256.872 59.6958 247.922 50.7452C238.971 41.7946 227.567 35.6992 215.152 33.2298C202.738 30.7603 189.869 32.0277 178.175 36.8717C166.48 41.7157 156.485 49.9188 149.453 60.4435C142.42 70.9683 138.667 83.342 138.667 96M74.6667 330.667H309.333C321.991 330.667 334.365 334.42 344.89 341.453C355.415 348.485 363.618 358.48 368.462 370.175C373.306 381.869 374.573 394.738 372.104 407.153C369.634 419.567 363.539 430.971 354.588 439.922C345.638 448.872 334.234 454.968 321.819 457.437C309.404 459.906 296.536 458.639 284.842 453.795C273.147 448.951 263.152 440.748 256.119 430.223C249.087 419.698 245.333 407.325 245.333 394.667M32 245.333H394.667C407.325 245.333 419.698 241.58 430.223 234.547C440.748 227.515 448.951 217.52 453.795 205.825C458.639 194.131 459.906 181.262 457.437 168.848C454.967 156.433 448.872 145.029 439.922 136.079C430.971 127.128 419.567 121.033 407.152 118.563C394.738 116.094 381.869 117.361 370.175 122.205C358.48 127.049 348.485 135.252 341.453 145.777C334.42 156.302 330.667 168.675 330.667 181.333"
                    fill="#fff"
                    stroke="#323232"
                    strokeWidth="60"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeDasharray={strokeDashArray}
                    strokeDashoffset={dashOffset1}
                />
                <AnimatedPath
                    d="M53.3333 160H202.667C215.325 160 227.698 156.246 238.223 149.214C248.748 142.182 256.951 132.186 261.795 120.492C266.639 108.797 267.906 95.929 265.437 83.5143C262.967 71.0995 256.872 59.6958 247.922 50.7452C238.971 41.7946 227.567 35.6992 215.152 33.2298C202.738 30.7603 189.869 32.0277 178.175 36.8717C166.48 41.7157 156.485 49.9188 149.453 60.4435C142.42 70.9683 138.667 83.342 138.667 96M74.6667 330.667H309.333C321.991 330.667 334.365 334.42 344.89 341.453C355.415 348.485 363.618 358.48 368.462 370.175C373.306 381.869 374.573 394.738 372.104 407.153C369.634 419.567 363.539 430.971 354.588 439.922C345.638 448.872 334.234 454.968 321.819 457.437C309.404 459.906 296.536 458.639 284.842 453.795C273.147 448.951 263.152 440.748 256.119 430.223C249.087 419.698 245.333 407.325 245.333 394.667M32 245.333H394.667C407.325 245.333 419.698 241.58 430.223 234.547C440.748 227.515 448.951 217.52 453.795 205.825C458.639 194.131 459.906 181.262 457.437 168.848C454.967 156.433 448.872 145.029 439.922 136.079C430.971 127.128 419.567 121.033 407.152 118.563C394.738 116.094 381.869 117.361 370.175 122.205C358.48 127.049 348.485 135.252 341.453 145.777C334.42 156.302 330.667 168.675 330.667 181.333"
                    fill="#fff"
                    stroke="#323232"
                    strokeWidth="60"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeDasharray={strokeDashArray}
                    strokeDashoffset={dashOffset2}
                />
            </Svg>
        </View>
    );
}

const AnimatedPath = Animated.createAnimatedComponent(Path);
